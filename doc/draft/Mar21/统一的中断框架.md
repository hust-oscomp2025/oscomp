统一中断处理框架设计思路：

1. 栈设计：
   - 每个进程有两个栈：用户栈和内核栈
   - 中断发生时总是使用内核栈保存上下文

2. 上下文保存机制：
   - 定义通用的中断帧结构(trapframe)，包含所有需要保存的寄存器
   - 在中断入口处，将上下文直接保存到当前内核栈顶
   - 无需在PCB中维护专门的trapframe字段

3. 中断处理流程：
   - 用户态中断：切换到内核栈，保存上下文到内核栈，处理中断，恢复上下文，返回用户态
   - 内核态中断：直接在当前内核栈上保存上下文，处理中断，恢复上下文，继续执行

4. 实现要点：
   - 汇编入口代码负责保存上下文到栈
   - 使用栈指针作为trapframe指针传递给C处理函数
   - 出口代码从栈恢复上下文

5. 优势：
   - 统一的中断处理路径
   - 符合RISC-V等架构的设计理念
   - 支持中断嵌套（每次中断都在栈上分配新的trapframe）